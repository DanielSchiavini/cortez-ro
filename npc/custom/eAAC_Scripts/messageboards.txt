prontera,156,197,2	script	Placa de Mensagens	111,{
	mes "^DD9900[ Placa ]^000000";
	mes "Olá, estou aqui para te ajudar, espero que você goste. ^_-";
	next;
	mes "^DD9900[ Placa ]^000000";
	mes "Tenha em mente que a cada dois dias suas mensagens são apagadas.";
	//mes "-Msg From Creator- In new version this will be set able, look forward to this! -End Msg From Creator-";
	next;
	L_Menu01:
	mes "^DD9900[ Placa ]^000000";
	mes "O que você quer fazer?";
	next;
	if(getgmlevel() >= 90) menu "Public board",L_pubgmmenu,"Gm Board",L_gmmenu,"Close Public Board",L_clospub,"Open Public Board",L_openpub;
	if($messagepubclose == 1) goto L_pubclosed;
	menu "Ler mensagens!",L_readmsg,"Deixar mensagem!",L_Postmsg,"Sair",L_leave;
	L_pubgmmenu:
	if($messagepubclose == 1) goto L_pubclosed;
	menu "Re-set the rotation",L_setrot,"Reset Message",L_Clearmsgs,"Read messages!",L_readmsg,"Post a message!",L_Postmsg,"Leave",L_leave;
	L_gmmenu:
	menu "Read messages!",L_gmboardread,"Post a Message!",L_gmboardpost,"Reset Messages",L_gmboardreset;

	L_openpub:
	mes "^DD9900[ Placa ]^000000";
	mes "Are you sure?";
	menu "Yes",-,"No",L_openpubn;
	mes "^DD9900[ Placa ]^000000";
	mes "It is done.";
	close2;
	set $messagepubclose,0;
	end;

	L_openpubn:
	mes "^DD9900[ Placa ]^000000";
	mes "Very well it shall remain closed.";
	close;

	L_pubclosed:
	mes "^DD9900[ Placa ]^000000";
	mes "Im sorry. The public boards are currently Closed.";
	close;

	L_clospub:
	mes "^DD9900[ Placa ]^000000";
	mes "Are you sure?";
	next;
	menu "Yes.",-,"No",L_closepubn;
	mes "^DD9900[ Placa ]^000000";
	mes "Very well I will not allow anyone into the public board.";
	close2;
	set $messagepubclose,1;
	end;

	L_closepubn:
	mes "^DD9900[ Placa ]^000000";
	mes "Have a nice day";
	close;

	L_gmboardreset:
	mes "^DD9900[ Placa ]^000000";
	mes "This will require atleast 2 GM's approval to reset the gm board.";
	mes "-Msg From Creator- This is bugged same gm can vote twice. Planned to revise in next version. -End Msg From Creator-";
	next;
	menu "Vote for reset.",L_gmboardresetvote,"Back to main.",L_Menu01,"Leave.",L_leave;

	L_gmboardresetvote:
	callfunc "F_gmresetcheck";
	set @tempid,getcharid(0);
	set $gmboardresetvotenumb,$gmboardresetvotenumb+1;
	set $gmboardresetvoted[$gmboardresetvotenumb],1;
	set $gmboardresetvoteid[$gmboardresetvotenumb],@tempid;
	set @tempid,0;
	set $gmboardreset,$gmboardreset-1;
	mes "^DD9900[ Placa ]^000000";
	mes "Thank you.";
	next;

	if(($gmboardreset == 0)) goto L_gmresetdone;
	if(($gmboardreset >= 1)) goto L_gmresetnotdone;
	close;

	L_gmresetdone:
	deletearray $gmmessageboardpost$[1],$gmmessageboardpostnumber;
	deletearray $gmmessageboardpostdate$[1],$gmmessageboardpostnumber;
	deletearray $gmmessageboardpostname$[1],$gmmessageboardpostnumber;
	deletearray $gmmessageboardeditdate$[1],$gmmessageboardpostnumber;
	deletearray $gmboardresetvoted[1],$gmboardresetvotenumber;
	deletearray $gmboardresetvoted[1],$gmboardresetvotenumber;
	deletearray $gmboardresetvoteid[1],$gmboardresetvotenumber;
	set $gmboardresetvotenumber,0;
	set $gmboardreset,2;
	mes "^DD9900[ Placa ]^000000";
	mes "The reset has been done.";
	close;

	L_gmresetnotdone:
	mes "^DD9900[ Placa ]^000000";
	mes "There needs to be "+$gmboardreset+" more gm(s) approval to do the reset.";
	close;

	L_gmboardread:
	if($gmmessageboardpostnumber == 0) goto L_msgno;
	callfunc "F_gmmessage";
	end;

	L_gmboardpost:
	if($gmmessageboardpostnumber >= 127) goto L_postmsgyestm;
	set @gmmessageboardpostername$,strcharinfo(0);
	set @gmmessageboarddate$,gettimestr("%Y-%m/%d %H:%M:%S",21);
	set $gmmessageboardpostnumber,$gmmessageboardpostnumber+1;
	input @gmmsgboardmsgt$;
	set $gmmessageboardpost$[$gmmessageboardpostnumber],@gmmsgboardmsgt$;
	set $gmmessageboardpostdate$[$gmmessageboardpostnumber],@gmmessageboarddate$;
	set $gmmessageboardpostname$[$gmmessageboardpostnumber],@gmmessageboardpostername$;
	mes "^DD9900[ Placa ]^000000";
	mes "Here is what your message looks like";
	next;
	mes "Posted by: "+$gmmessageboardpostname$[$gmmessageboardpostnumber]+".";
	mes "On: "+$gmmessageboardpostdate$[$gmmessageboardpostnumber]+".";
	mes $gmmessageboardpost$[$gmmessageboardpostnumber];
	close;


	L_setrot:
	set $@determinedayrotation,gettime(4); //this determines the day rotation for clearing messages.
	if(($@determinedayrotation == 0)) set $messageBoard,0;
	if(($@determinedayrotation == 1)) set $messageBoard,1;
	if(($@determinedayrotation == 2)) set $messageBoard,0;
	if(($@determinedayrotation == 3)) set $messageBoard,1;
	if(($@determinedayrotation == 4)) set $messageBoard,0;
	if(($@determinedayrotation == 5)) set $messageBoard,1;
	if(($@determinedayrotation == 6)) set $messageBoard,0;
	mes "It is done.";
	close;

	L_Clearmsgs:
	mes "^DD9900[ Placa ]^000000";
	mes "Are you sure?";
	next;
	menu "Yes",L_clearmsgsy,"No thanks.",L_Menu01;

	L_clearmsgsy:
	deletearray $messageboardpost$[1],$messageboardpostnumber;
	deletearray $messageboardpostdate$[1],$messageboardpostnumber;
	deletearray $messageboardpostname$[1],$messageboardpostnumber;
	deletearray $messageboardeditdate$[1],$messageboardpostnumber;
	deletearray $mymessage[1],$messageboardpostnumber;
	set $messageboardpostnumber,0;
	mes "^DD9900[ Placa ]^000000";
	mes "It is done.";
	close;

	L_leave:
	close;

	L_Postmsg:
	mes "^DD9900[ Placa ]^000000";
	mes "O que deseja dizer na sua mensagem?";
	next;
	set @msgboardmsgt$,0;
	input @msgboardmsgt$;
	mes "^DD9900[ Placa ]^000000";
	mes "Tem certeza que esta é a mensagem que você deseja?";
	mes @msgboardmsgt$;
	next;
	menu "Sim!",L_postmsgyes,"Não.. Deixe-me reescrever!",L_Postmsg,"Mudei de idéia, deixe-me ir embora",lleave;

	L_postmsgyes:
	if(($messageboardpostnumber >= 127)) goto L_postmsgyestm;
	set @messageboardpostername$,strcharinfo(0);
	set @messageboarddate$,gettimestr("%d/%m/%Y %H:%M:%S",21);
	set $messageboardpostnumber,$messageboardpostnumber+1;
	set @mymessage2,$messageboardpostnumber;
	set $mymessage[$messageboardpostnumber],5;
	set $messageboardpost$[$messageboardpostnumber],@msgboardmsgt$;
	set $messageboardpostdate$[$messageboardpostnumber],@messageboarddate$;
	set $messageboardpostname$[$messageboardpostnumber],@messageboardpostername$;
	mes "^DD9900[ Placa ]^000000";
	mes "Assim que sua mensagem vai aparecer:";
	next;
	mes "Enviado Por: "+$messageboardpostname$[$messageboardpostnumber]+".";
	mes "Em: "+$messageboardpostdate$[$messageboardpostnumber]+".";
	mes $messageboardpost$[$messageboardpostnumber];
	close;

	L_postmsgyestm:
	set @mesboardmsgt$,0;
	mes "^DD9900[ Placa ]^000000";
	mes "Desculpe, mas você precisará aguardar por espaço para mais mensagens, em 1 ou 2 dias =)";
	close;

	lleave:
	deletearray $messageboardpost$[@tempview],@tempview;
	deletearray $messageboardpostname$[@tempview],@tempview;
	deletearray $messageboardpostdate$[@tempview],@tempview;
	deletearray $mymessage[@tempview],@tempview;
	set $messageboardpostnumber,$messageboardpostnumber-1;
	set @msgboardmsgt$,0;
	close;

	L_readmsg:
	if($messageboardpostnumber == 0) goto L_msgno;
	callfunc "F_message";
	end;

	L_msgno:
	mes "^DD9900[ Placa ]^000000";
	mes "Não existem mensagens agora...";
	close;

	OnInit:
	set $gmboardreset,2;
	set $gmboardresetvotenumb,0;
	end;

	OnInterIfInitOnce:
	set $@determinedayrotation,gettime(4); //this determines the day rotation for clearing messages.
	if(($@determinedayrotation == 0)) set $messageBoard,0;
	if(($@determinedayrotation == 1)) set $messageBoard,1;
	if(($@determinedayrotation == 2)) set $messageBoard,0;
	if(($@determinedayrotation == 3)) set $messageBoard,1;
	if(($@determinedayrotation == 4)) set $messageBoard,0;
	if(($@determinedayrotation == 5)) set $messageBoard,1;
	if(($@determinedayrotation == 6)) set $messageBoard,0;
	end;


	OnSun1200:
	if(($messageBoard == 1)) end;
	deletearray $messageboardpost$[1],$messageboardpostnumber;
	deletearray $messageboardpostdate$[1],$messageboardpostnumber;
	deletearray $messageboardpostname$[1],$messageboardpostnumber;
	deletearray $mymessage[1],$messageboardpostnumber;
	set $messageboardpostnumber,0;
	end;

	OnSat1200:
	if(($messageBoard == 0)) end;
	deletearray $messageboardpost$[1],$messageboardpostnumber;
	deletearray $messageboardpostdate$[1],$messageboardpostnumber;
	deletearray $messageboardpostname$[1],$messageboardpostnumber;
	deletearray $mymessage[1],$messageboardpostnumber;
	set $messageboardpostnumber,0;
	end;

	OnMon1200:
	if(($messageBoard == 1)) end;
	deletearray $messageboardpost$[1],$messageboardpostnumber;
	deletearray $messageboardpostdate$[1],$messageboardpostnumber;
	deletearray $messageboardpostname$[1],$messageboardpostnumber;
	deletearray $mymessage[1],$messageboardpostnumber;
	set $messageboardpostnumber,0;
	end;

	OnTue1200:
	if(($messageBoard == 0)) end;
	deletearray $messageboardpost$[1],$messageboardpostnumber;
	deletearray $messageboardpostdate$[1],$messageboardpostnumber;
	deletearray $messageboardpostname$[1],$messageboardpostnumber;
	deletearray $mymessage[1],$messageboardpostnumber;
	set $messageboardpostnumber,0;
	end;

	OnWed1200:
	if(($messageBoard == 1)) end;
	deletearray $messageboardpost$[1],$messageboardpostnumber;
	deletearray $messageboardpostdate$[1],$messageboardpostnumber;
	deletearray $messageboardpostname$[1],$messageboardpostnumber;
	deletearray $mymessage[1],$messageboardpostnumber;
	set $messageboardpostnumber,0;
	end;

	OnThu1200:
	if(($messageBoard == 0)) end;
	deletearray $messageboardpost$[1],$messageboardpostnumber;
	deletearray $messageboardpostdate$[1],$messageboardpostnumber;
	deletearray $messageboardpostname$[1],$messageboardpostnumber;
	deletearray $mymessage[1],$messageboardpostnumber;
	set $messageboardpostnumber,0;
	end;

	OnFri1200:
	if(($messageBoard == 1)) end;
	deletearray $messageboardpost$[1],$messageboardpostnumber;
	deletearray $messageboardpostdate$[1],$messageboardpostnumber;
	deletearray $messageboardpostname$[1],$messageboardpostnumber;
	deletearray $mymessage[@tempview],@tempview;
	set $messageboardpostnumber,0;
	end;
}

function	script	F_gmresetcheck	{
	set @tempcheck,0;
	L_top:
	set @tempcheck,@tempcheck+1;
	if(($gmboardresetvoted[@tempview] == 1)) goto L_votecheck;
	if(($gmboardresetvoted[@tempview] == 0)) return;
	goto L_top;
	end;

	L_votecheck:
	set @tempcheckid,0;
	set @tempcheckid,getcharid(0);
	if(($gmboardresetvoteid[@tempview] != @tempcheckid)) goto L_top;
	if(($gmboardresetvoteid[@tempview] == @tempcheckid)) goto L_voted;
	end;
}

function	script	F_gmmessage	{
	set @tempview,0;
	L_top:
	set @tempview,@tempview+1;
	mes "Posted By: "+$gmmessageboardpostname$[@tempview]+".";
	mes "On: "+$gmmessageboardpostdate$[@tempview]+".";
	mes $gmmessageboardpost$[@tempview]+".";
	menu "Next Message",L_top2;

	L_top2:
	if(($gmmessageboardpostnumber > @tempview)) goto L_top;
	close;
}

function	script	F_message	{
	set @tempview,0;
	L_top:
	set @tempview,@tempview+1;
	mes "Enviado Por: "+$messageboardpostname$[@tempview]+".";
	mes "Em: "+$messageboardpostdate$[@tempview]+".";
	mes $messageboardpost$[@tempview]+".";
	next;
	if(($mymessage[@tempview] == 5) && (getgmlevel()>0)) menu "Próxima mensagem",L_top2,"Apagar minha mensagem",L_delmy,"Editar minha mensagem",L_editmy,"Apagar esta mensagem",L_Del;
	if(getgmlevel()>99)  menu "Next Message",L_top2,"Delete This message",L_Del;
	if($mymessage[@tempview] == 5) menu "Próxima mensagem",L_top2,"Apagar minha mensagem",L_delmy,"Editar minha mensagem",L_editmy;
	menu "Próxima mensagem",L_top2;
	close;

	L_editmy:
	mes "Tem certeza?";
	next;
	menu "Sim",L_editmyy,"Não",L_editmyn;

	L_editmyy:
	mes "Como você quer que a sua mensagem seja??";
	next;
	mes "Mensagem atual!";
	mes $messageboardpost$[@tempview];
	set @tempeditmsg$,0;
	input @tempeditmsg$;
	next;
	mes "É isso que você quer?";
	mes @tempeditmsg$;
	next;
	menu "Sim!",L_editmyyy,"Não.",L_editmyyn;

	L_editmyyy:
	deletearray $messageboardpost$[@tempview],@tempview;
	set $messageboardpost$[@tempview],@tempeditmsg$;
	mes "Sua mensagem vai ficar assim";
	next;
	mes "Enviado Por: "+$messageboardpostname$[@tempview]+".";
	mes "Em: "+$messageboardpostdate$[@tempview]+".";
	mes $messageboardpost$[@tempview]+".";
	close2;
	set @tempview,0;
	end;

	L_editmyn:
	Mes "Então que seja.";
	set @tempview,0;
	close;

	L_editmyyn:
	mes "Então que seja!";
	set @tempeditmsg$,0;
	set @tempview,0;
	close;

	L_delmy:
	mes "Tem certeza...?";
	next;
	menu "Sim",L_delmyy,"Não, valeu.",L_delmyn;

	L_delmyy:
	deletearray $messageboardpost$[@tempview],@tempview;
	deletearray $messageboardpostname$[@tempview],@tempview;
	deletearray $messageboardpostdate$[@tempview],@tempview;
	deletearray $mymessage[@tempview],@tempview;
	deletearray $messageboardeditdate$[@tempview],@tempview;
	set $messageboardpostnumber,$messageboardpostnumber-1;
	set @tempview,0;
	mes "Pronto.";
	close;

	L_delmyn:
	mes "Volte sempre.";
	set @tempview,0;
	close;

	L_top2:
	if(($messageboardpostnumber > @tempview)) goto L_top;
	close;

	L_Del:
	mes "Tem certeza??";
	next;
	menu "Sim",L_Dely,"Não",L_Deln;

	L_Dely:
	deletearray $messageboardpost$[@tempview],@tempview;
	deletearray $messageboardpostname$[@tempview],@tempview;
	deletearray $messageboardpostdate$[@tempview],@tempview;
	deletearray $mymessage[@tempview],@tempview;
	deletearray $messageboardeditdate$[@tempview],@tempview; 
	set $messageboardpostnumber,$messageboardpostnumber-1;
	mes "Pronto.";
	set @tempview,0;
	close;

	L_Deln:
	mes "Volte sempre!";
	set @tempview,0;
	close;
}